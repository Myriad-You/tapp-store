{
  "id": "com.myriad.weather",
  "name": "å¤©æ°”é¢„æŠ¥",
  "version": "1.0.0",
  "description": "æ˜¾ç¤ºå½“å‰ä½ç½®çš„å¤©æ°”ä¿¡æ¯ï¼Œæ”¯æŒå¤šç§å¤©æ°”APIæœåŠ¡",
  "main": "index.js",
  "styles": "styles.css",
  "author": {
    "name": "Myriad Team"
  },
  "permissions": [
    "storage",
    "widget:register"
  ],
  "iconSvg": "<svg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'><circle cx='12' cy='12' r='5' stroke='currentColor' stroke-width='2'/><path d='M12 2v3M12 19v3M2 12h3M19 12h3M4.9 4.9l2.1 2.1M16.9 16.9l2.1 2.1M4.9 19.1l2.1-2.1M16.9 7.1l2.1-2.1' stroke='currentColor' stroke-width='2' stroke-linecap='round'/></svg>",
  "themeColor": "#42A5F5",
  "hasPage": true,
  "widgets": [
    {
      "id": "weather-current",
      "name": "å½“å‰å¤©æ°”",
      "description": "æ˜¾ç¤ºå½“å‰ä½ç½®çš„å®æ—¶å¤©æ°”",
      "icon": "ğŸŒ¤ï¸",
      "defaultSize": "2x2",
      "sizes": ["2x2", "4x2"],
      "minRefreshInterval": 300000,
      "category": "utility",
      "templates": {
        "2x2": "widget-2x2.html",
        "4x2": "widget-4x2.html"
      }
    }
  ],
  "pageTemplate": "page.html",
  "settings": [
    {
      "key": "units",
      "label": "æ¸©åº¦å•ä½",
      "type": "select",
      "description": "é€‰æ‹©æ¸©åº¦æ˜¾ç¤ºå•ä½",
      "defaultValue": "metric",
      "options": [
        { "value": "metric", "label": "æ‘„æ°åº¦ (Â°C)" },
        { "value": "imperial", "label": "åæ°åº¦ (Â°F)" }
      ]
    },
    {
      "key": "refreshInterval",
      "label": "åˆ·æ–°é—´éš”ï¼ˆåˆ†é’Ÿï¼‰",
      "type": "number",
      "description": "è‡ªåŠ¨åˆ·æ–°å¤©æ°”æ•°æ®çš„é—´éš”",
      "defaultValue": 30,
      "min": 5,
      "max": 120
    }
  ],
  "apis": {
    "getWeather": {
      "name": "è·å–å¤©æ°”æ•°æ®",
      "description": "æ ¹æ®ç”¨æˆ·ä½ç½®è·å–å½“å‰å¤©æ°”ä¿¡æ¯",
      "access": "public",
      "type": "http",
      "url": "https://api.openweathermap.org/data/2.5/weather",
      "method": "GET",
      "params": {
        "lat": "{{geo.lat}}",
        "lon": "{{geo.lon}}",
        "appid": "{{secrets.openweather_api_key}}",
        "units": "{{params.units}}",
        "lang": "zh_cn"
      },
      "inject": ["geo", "secrets"],
      "cache_ttl": 600,
      "rate_limit": {
        "calls": 60,
        "period": 3600
      }
    },
    "getForecast": {
      "name": "è·å–å¤©æ°”é¢„æŠ¥",
      "description": "è·å–æœªæ¥5å¤©çš„å¤©æ°”é¢„æŠ¥",
      "access": "public",
      "type": "http",
      "url": "https://api.openweathermap.org/data/2.5/forecast",
      "method": "GET",
      "params": {
        "lat": "{{geo.lat}}",
        "lon": "{{geo.lon}}",
        "appid": "{{secrets.openweather_api_key}}",
        "units": "{{params.units}}",
        "lang": "zh_cn",
        "cnt": "{{params.count}}"
      },
      "inject": ["geo", "secrets"],
      "cache_ttl": 1800,
      "rate_limit": {
        "calls": 30,
        "period": 3600
      }
    }
  }
}
